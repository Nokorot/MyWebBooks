{% extends 'header.html' %}

{% block head %} 
<title>Books</title>
{% endblock %} 

{% block body %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>



    <h1>Book Data List</h1>

    <a href="{{ url_for('books.new_book') }}" class="new-data-instance-button fa fa-book-medical"> Add Book</a>
    <div class="kindle-address">
    <form action="{{url_for('set_kindle_address')}}" method="post  ">
      <label for="kindle_address">Enter your Kindle Email Address:</label>
      <input type="text" name="kindle_address" id="kindle_address">
      <button type="submit">submit</button>
    </form>
    </div>
    <div class="container">
      
        {% for index, data in enumerate(data_list) %}
        <div class="list-item">
            
            <form action="{{ url_for('books.delete_book', id = data['_id']) }}" method="post">
              <div class="center">
              <a href="{{ url_for('books.edit_book', id=data['_id']) }}">
                <img class="center book-img" src="{{data['img_url']}}" alt="{{data['title'] | default('no title')}}">aaa </a>
              </div>
              <div class="center">
              <input type="text" name = "del" hidden = 'true' value="{{ data['_id'] }}">
              
              <a href="{{ url_for('books.delete_book', id = data['_id']) }}" class = 'button delete-button fa-solid fa-trash-can'></a>
              <a href="{{ url_for('books.send_to_kindle', id = data['_id']) }}" class="button delete-button fa-solid"> Send To Kindle </a>
              <a href="{{ url_for('books.download_epub', id = data['_id']) }}", id = "download-book" class="button delete-button fa-solid fa-download"></a>
              <canvas id="loading-bar-{{index}}"></canvas>
              <!--button type="button" id="download-book" class="button delete-button fa-solid fa-download"></button-->
              </div>
            </form>
        </div>
        {% endfor %}
    </div>
    <script src="/static/epub/test.js"></script>

{% endblock %}
